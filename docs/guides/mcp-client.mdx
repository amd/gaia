---
title: "MCP Client"
description: "Connect GAIA agents to external MCP servers and use their tools"
---

<Info>
  **Examples:**
  - [`examples/mcp_time_server_agent.py`](https://github.com/amd/gaia/blob/main/examples/mcp_time_server_agent.py) - Simple Python server example
  - [`examples/mcp_config_based_agent.py`](https://github.com/amd/gaia/blob/main/examples/mcp_config_based_agent.py) - Config file-based loading
</Info>

<Note>
**See Also:**
- [SDK Reference](/sdk/sdks/mcp) - Quick code snippets
- [Full Specification](/spec/mcp-client) - Complete API documentation and implementation details
</Note>

## Overview

The MCP (Model Context Protocol) Client enables any GAIA agent to connect to external MCP servers and use their tools. This provides universal tool integration - connect once, and all tools become available to your agent automatically.

### What is MCP?

MCP is an open protocol that standardizes how AI applications connect to external tools and data sources. Many services provide MCP servers (filesystem, GitHub, databases, etc.) that GAIA can connect to.

### Key Benefits

- **Zero Code Integration**: No need to write custom tool wrappers
- **Universal Compatibility**: Works with any MCP-compliant server
- **Automatic Discovery**: Tools are registered and documented automatically
- **Namespace Safety**: Multiple servers with same tool names work without conflicts

## Quick Start

The example includes pre-configured MCP servers. Run it directly:

```bash
python examples/mcp_config_based_agent.py
```

Output:
```
Connected: memory, thinking, time

Agent: The current time in Tokyo is 11:59 PM on Wednesday, January 28, 2026, Japan Standard Time (JST).
```

The example demonstrates a clean, minimal MCP agent with:
- **Config-based loading**: Servers loaded from `mcp_servers.json`
- **Clean output**: No debug logging, just the response
- **Multiple servers**: Memory, thinking, and time tools available

---

## Prerequisites

<CardGroup cols={2}>
  <Card title="GAIA Installation" icon="download">
    Install GAIA with MCP support:
    ```bash
    uv pip install -e ".[mcp]"
    ```
    For development with tests:
    ```bash
    uv pip install -e ".[mcp,dev]"
    ```
  </Card>

  <Card title="Node.js (Optional)" icon="node-js">
    Required only for npm-based MCP servers, e.g.:
    ```bash
    npx -y @modelcontextprotocol/server-memory
    ```
    See [Setup Guide](/setup) for NVM installation instructions.
  </Card>
</CardGroup>

## Connecting to MCP Servers

### Using Stdio Transport

Most MCP servers use stdio (standard input/output) via subprocess:

<Tabs>
  <Tab title="Filesystem">
    ```python
    agent.connect_mcp_server("filesystem", {
        "command": "npx",
        "args": ["-y", "@modelcontextprotocol/server-filesystem", "/path/to/directory"]
    })
    ```
  </Tab>

  <Tab title="GitHub">
    ```python
        agent.connect_mcp_server("github", {
        "command": "npx",
        "args": ["-y", "@modelcontextprotocol/server-github"],
        "env": {"GITHUB_TOKEN": "ghp_your_token_here"}
    })
    ```
  </Tab>

  <Tab title="Python Servers">
    ```python
    # Python-based MCP servers (via uvx)
    agent.connect_mcp_server("time", {
        "command": "uvx",
        "args": ["mcp-server-time"]
    })
    ```
  </Tab>
</Tabs>

## Using Configuration Files

Instead of hardcoding server configs, store them in `~/.gaia/mcp_servers.json`:

```json
{
  "mcpServers": {
    "filesystem": {
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-filesystem", "/home/user/documents"]
    },
    "memory": {
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-memory"]
    },
    "github": {
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-github"],
      "env": {
        "GITHUB_TOKEN": "ghp_xxx"
      }
    }
  }
}
```

<Note>
This format is compatible with Claude Desktop and other Anthropic tools. The `mcpServers` key, separate `command`/`args` fields, and `env` support are standard across the ecosystem.
</Note>

Load all configured servers in your agent:
```python
count = agent.load_mcp_servers_from_config()
print(f"Loaded {count} servers")
```

You can also manage servers via CLI:
```bash
gaia mcp add filesystem '{"command": "npx", "args": ["-y", "@modelcontextprotocol/server-filesystem", "/tmp"]}'
gaia mcp list
```

## CLI Commands

GAIA provides CLI commands for managing MCP server configurations without writing code.

<Card title="MCP CLI Reference" icon="terminal" href="/reference/cli#mcp-client">
  Complete documentation of all MCP CLI commands: `add`, `list`, `tools`, `test-client`, `remove`
</Card>

**Quick reference:**
```bash
gaia mcp add <name> "<command>"     # Add server to config
gaia mcp list                        # List configured servers
gaia mcp tools <name>                # List tools from server
gaia mcp test-client <name>          # Test connection
gaia mcp remove <name>               # Remove server
```

For detailed usage, parameters, and output examples, see the [CLI Reference](/reference/cli#mcp-client).


## Complete Examples

Working examples are available in the GAIA repository:

<CardGroup cols={2}>
  <Card title="Time Server Agent" icon="clock" href="https://github.com/amd/gaia/blob/main/examples/mcp_time_server_agent.py">
    Simple example connecting to a Python MCP server via `uvx`
  </Card>

  <Card title="Config-Based Agent" icon="file-code" href="https://github.com/amd/gaia/blob/main/examples/mcp_config_based_agent.py">
    Load servers from `mcp_servers.json` - recommended for production
  </Card>
</CardGroup>

For detailed API usage and patterns, see the [SDK Reference](/sdk/sdks/mcp).


## Best Practices

<CardGroup cols={2}>
  <Card title="Error Handling" icon="shield-check">
    Always handle connection failures gracefully:

    ```python
    success = agent.connect_mcp_server("server", {
        "command": "npx",
        "args": ["-y", "@mcp/server"]
    })
    if not success:
        print("Failed to connect, using fallback tools")
    ```
  </Card>

  <Card title="Resource Cleanup" icon="broom">
    Disconnect servers when done:

    ```python
    def __del__(self):
        for server in self.list_mcp_servers():
            self.disconnect_mcp_server(server)
    ```
  </Card>

  <Card title="Tool Discovery" icon="magnifying-glass">
    Cache tool lists instead of fetching repeatedly:

    ```python
    tools = client.list_tools()  # Cached by default
    tools = client.list_tools(refresh=True)  # Force refresh
    ```
  </Card>

  <Card title="Debug Mode" icon="bug">
    Enable debug logging during development:

    ```python
    client = MCPClient.from_config(
        "server",
        {"command": "npx", "args": ["-y", "@mcp/server"]},
        debug=True  # Shows detailed logs
    )
    ```
  </Card>
</CardGroup>

## Next Steps

<CardGroup cols={2}>
  <Card title="Build a Custom Agent" icon="robot" href="/guides/code">
    Learn how to create agents that leverage MCP tools
  </Card>

  <Card title="MCP Server List" icon="server" href="https://github.com/modelcontextprotocol/servers">
    Browse available MCP servers from the community
  </Card>

  <Card title="Create MCP Server" icon="code" href="/sdk/infrastructure/mcp">
    Build your own MCP server to expose custom tools
  </Card>

  <Card title="API Reference" icon="book" href="/sdk/sdks/mcp">
    Detailed API documentation for MCP Client
  </Card>
</CardGroup>

---

<small style="color: #666;">

**License**

Copyright(C) 2024-2025 Advanced Micro Devices, Inc. All rights reserved.

SPDX-License-Identifier: MIT

</small>
